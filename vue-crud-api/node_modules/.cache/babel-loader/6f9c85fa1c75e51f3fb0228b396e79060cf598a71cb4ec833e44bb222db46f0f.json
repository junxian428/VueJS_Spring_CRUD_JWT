{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-5 text-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h3\", null, _toDisplayString($setup.message), 1 /* TEXT */), _createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    class: \"btn btn-lg btn-primary\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.logout && $setup.logout(...args))\n  }, \"Logout\")]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$setup","message","href","onClick","_cache","args","logout"],"sources":["D:\\Project\\VUEJSSPRING_CRUD_JWT\\vue-crud-api\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-5 text-center\">\r\n      <h3>{{ message }}</h3>\r\n  \r\n      <a href=\"javascript:void(0)\" class=\"btn btn-lg btn-primary\"\r\n         @click=\"logout\"\r\n      >Logout</a>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import {onMounted, ref} from \"vue\";\r\n  import axios from \"axios\";\r\n  import {useRouter} from \"vue-router\";\r\n  \r\n  export default {\r\n    name: \"Home\",\r\n    setup() {\r\n      const message = ref('');\r\n      const router = useRouter();\r\n  \r\n      /*\r\n      onMounted(async () => {\r\n        try {\r\n          const {data} = await axios.get('user');\r\n  \r\n          message.value = `Hi ${data.name}`;\r\n        } catch (e) {\r\n          await router.push('/login');\r\n        }\r\n      });\r\n  \r\n      */\r\n  \r\n      \r\n      onMounted(async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n        //headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\r\n        //headers.append('Access-Control-Allow-Credentials', 'true');\r\n        try {\r\n          const response = await axios.get('http://localhost:8086/api/v1/user', {\r\n            headers: {\r\n              Authorization: `Bearer ${sessionCookie}`,\r\n              'Access-Control-Allow-Origin': '*'\r\n            },\r\n          });\r\n  \r\n          const { data } = response;\r\n          console.log(data);\r\n          //message.value = `Hi ${data.name}`;\r\n        } catch (error) {\r\n          console.error(error);\r\n          await router.push('/');\r\n        }\r\n      });\r\n      \r\n  \r\n      \r\n  \r\n      const logout = async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n        //\r\n  \r\n        axios.post('http://localhost:8086/api/v1/auth/quit')\r\n          .then(() => {\r\n            // Handle successful logout\r\n            // Clear any user-related data in your Vue.js application\r\n            // Redirect the user to the login page or any other desired route\r\n            console.log(\"success\");\r\n          })\r\n          .catch(error => {\r\n            // Handle logout error\r\n            console.error(error);\r\n          });\r\n      }\r\n  \r\n      return {\r\n        message,\r\n        logout\r\n      }\r\n  \r\n  \r\n  \r\n    }\r\n  }\r\n  </script>"],"mappings":";;EACSA,KAAK,EAAC;AAA4B;;uBAAvCC,mBAAA,CAMM,OANNC,UAMM,GALJC,mBAAA,CAAsB,YAAAC,gBAAA,CAAfC,MAAA,CAAAC,OAAO,kBAEdH,mBAAA,CAEW;IAFRI,IAAI,EAAC,oBAAoB;IAACP,KAAK,EAAC,wBAAwB;IACvDQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,MAAA,CAAAM,MAAA,IAAAN,MAAA,CAAAM,MAAA,IAAAD,IAAA,CAAM;KAChB,QAAM,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}