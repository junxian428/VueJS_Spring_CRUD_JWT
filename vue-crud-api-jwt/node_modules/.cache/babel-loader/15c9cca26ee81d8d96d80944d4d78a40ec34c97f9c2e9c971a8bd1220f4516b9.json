{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-5 text-center\"\n};\nconst _hoisted_2 = {\n  class: \"message-container\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"container mt-5 text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"javascript:void(0)\",\n  class: \"btn btn-lg btn-primary\",\n  id: \"logoutBtn\"\n}, \"Logout\"), /*#__PURE__*/_createElementVNode(\"br\")], -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_6 = {\n  key: 0,\n  class: \"button-container\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h5\", null, _toDisplayString($setup.message), 1 /* TEXT */)])]), _hoisted_3, _hoisted_4, _hoisted_5, _ctx.showMenuContainer ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n    class: \"button\",\n    onMouseover: _cache[0] || (_cache[0] = $event => $options.toggleHoverEffect(1)),\n    onMouseout: _cache[1] || (_cache[1] = $event => $options.toggleHoverEffect(1))\n  }, [_createElementVNode(\"img\", {\n    src: $data.buttonImages[0],\n    alt: \"Button 1\"\n  }, null, 8 /* PROPS */, _hoisted_7)], 32 /* HYDRATE_EVENTS */), _createElementVNode(\"button\", {\n    class: \"button\",\n    onMouseover: _cache[2] || (_cache[2] = $event => $options.toggleHoverEffect(2)),\n    onMouseout: _cache[3] || (_cache[3] = $event => $options.toggleHoverEffect(2))\n  }, [_createElementVNode(\"img\", {\n    src: $data.buttonImages[1],\n    alt: \"Button 2\"\n  }, null, 8 /* PROPS */, _hoisted_8)], 32 /* HYDRATE_EVENTS */)])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","href","id","_hoisted_1","_hoisted_2","_toDisplayString","$setup","message","_hoisted_3","_hoisted_4","_hoisted_5","_ctx","showMenuContainer","_createElementBlock","_hoisted_6","onMouseover","_cache","$event","$options","toggleHoverEffect","onMouseout","src","$data","buttonImages","alt"],"sources":["D:\\Project\\VUEJSSPRING_CRUD_JWT\\vue-crud-api-jwt\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n\r\n    <div class=\"container mt-5 text-center\">\r\n        <div class=\"message-container\">\r\n          <h5>{{ message }}</h5>\r\n        </div>\r\n    </div>\r\n        \r\n    <div class=\"container mt-5 text-center\">\r\n      <a href=\"javascript:void(0)\" class=\"btn btn-lg btn-primary\" id=\"logoutBtn\">Logout</a>\r\n      <br>\r\n\r\n    </div>\r\n\r\n\r\n    <br>\r\n    <br>\r\n\r\n    \r\n    <div class=\"button-container\"  v-if=\"showMenuContainer\">\r\n    <button class=\"button\" @mouseover=\"toggleHoverEffect(1)\" @mouseout=\"toggleHoverEffect(1)\">\r\n      <img :src=\"buttonImages[0]\" alt=\"Button 1\">\r\n    </button>\r\n    <button class=\"button\" @mouseover=\"toggleHoverEffect(2)\" @mouseout=\"toggleHoverEffect(2)\">\r\n      <img :src=\"buttonImages[1]\" alt=\"Button 2\">\r\n    </button>\r\n  </div>\r\n\r\n\r\n  </template>\r\n  \r\n  <script>\r\n  import {onMounted, ref} from \"vue\";\r\n  import axios from \"axios\";\r\n  import {useRouter} from \"vue-router\";\r\n  import VueCookies from 'vue-cookies';\r\n\r\n  export default {\r\n    name: \"Home\",\r\n    data() {\r\n    return {\r\n      buttonImages: ['Config.png', 'Monitoring.png'],  // Replace with the paths to your button images\r\n      hoverEffects: [false, false]  // Track hover effects for each button\r\n    };\r\n  },\r\n  methods: {\r\n    toggleHoverEffect(index) {\r\n      this.hoverEffects[index - 1] = !this.hoverEffects[index - 1];\r\n    }\r\n  },\r\n\r\n\r\n    setup() {\r\n      const message = ref('');\r\n      const router = useRouter();\r\n  \r\n      /*\r\n      onMounted(async () => {\r\n        try {\r\n          const {data} = await axios.get('user');\r\n  \r\n          message.value = `Hi ${data.name}`;\r\n        } catch (e) {\r\n          await router.push('/login');\r\n        }\r\n      });\r\n  \r\n      */\r\n  \r\n      \r\n      onMounted(async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n        const logoutBtn = document.getElementById('logoutBtn');\r\n  \r\n  \r\n        //\r\n        if(sessionCookie != \"\"){\r\n          \r\n          console.log(\"logout button event attached\");\r\n          logoutBtn.addEventListener('click', logout);\r\n        } else{\r\n          logoutBtn.textContent = \"login\";\r\n          logoutBtn.addEventListener('click', login);\r\n          //message.value = `Please login your account`;\r\n\r\n        }\r\n        \r\n        //headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\r\n        //headers.append('Access-Control-Allow-Credentials', 'true');\r\n        try {\r\n          const response = await axios.get('http://localhost:8087/dashboard', {\r\n            headers: {\r\n              Authorization: `Bearer ${sessionCookie}`,\r\n              'Access-Control-Allow-Origin': '*'\r\n            },\r\n          });\r\n  \r\n          const { data } = response;\r\n\r\n\r\n          //console.log(data);\r\n          //\r\n\r\n      \r\n          // Access the object properties\r\n          const username = data.username;\r\n          const blob = data.blob;\r\n\r\n          console.log(\"Username:\", username);\r\n          //console.log(\"Blob:\",  atob(blob));\r\n          VueCookies.set('blob_data',  blob, '7d'); // Save the access token in a cookie for 7 days\r\n\r\n          const blobCookie = document.cookie.replace(\r\n            /(?:(?:^|.*;\\s*)blob_data\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n            '$1'\r\n          );\r\n        //console.log(blobCookie);\r\n        //\r\n        // URL decoding\r\n        //var decodedValue = decodeURIComponent(blobCookie);\r\n\r\n        // Base64 decoding\r\n        //var base64DecodedValue = atob(decodedValue);\r\n        //console.log(base64DecodedValue);\r\n          //\r\n          message.value = `Username : ${data.username}`;\r\n          if(data.username === undefined){\r\n            message.value = \"Please login your account\";\r\n\r\n          }\r\n        } catch (error) {\r\n          console.error(error);\r\n          await router.push('/');\r\n        }\r\n      });\r\n      \r\n  \r\n          function convertToLogin() {\r\n        logoutBtn.textContent = 'Login';\r\n        logoutBtn.removeEventListener('click', logout);\r\n        logoutBtn.addEventListener('click', login);\r\n      }\r\n            function login() {\r\n          // Perform login actions here\r\n          console.log('Login clicked');\r\n          router.push('/login');\r\n        }\r\n  \r\n  \r\n  \r\n      const logout = async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n  \r\n        //\r\n  \r\n        axios.post('http://localhost:8086/api/v1/auth/quit')\r\n          .then(() => {\r\n            // Handle successful logout\r\n            // Clear any user-related data in your Vue.js application\r\n            // Redirect the user to the login page or any other desired route\r\n            console.log(\"success\");\r\n            sessionStorage.removeItem('access_Token');\r\n            document.cookie = \"access_Token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\r\n            localStorage.removeItem('access_Token');\r\n\r\n            message.value = `You are logout please login again`;\r\n            //\r\n\r\n            //\r\n            convertToLogin();\r\n  \r\n          })\r\n          .catch(error => {\r\n            // Handle logout error\r\n            console.error(error);\r\n            router.push('/login');\r\n          });\r\n      }\r\n  \r\n      return {\r\n        message,\r\n        logout\r\n      }\r\n  \r\n  \r\n  \r\n    }\r\n  }\r\n  </script>\r\n\r\n\r\n<style>\r\n.button-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.button {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 200px;\r\n  height: 500px;\r\n  border: none;\r\n  background-color: transparent;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.button img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.button:hover {\r\n  transform: scale(1.1);\r\n}\r\n\r\n/* Add additional styling and hover effects as desired */\r\n</style>\r\n\r\n"],"mappings":";;EAESA,KAAK,EAAC;AAA4B;;EAC9BA,KAAK,EAAC;AAAmB;gCAKlCC,mBAAA,CAIM;EAJDD,KAAK,EAAC;AAA4B,I,aACrCC,mBAAA,CAAqF;EAAlFC,IAAI,EAAC,oBAAoB;EAACF,KAAK,EAAC,wBAAwB;EAACG,EAAE,EAAC;GAAY,QAAM,G,aACjFF,mBAAA,CAAI,M;gCAKNA,mBAAA,CAAI;gCACJA,mBAAA,CAAI;;;EAGCD,KAAK,EAAC;;;;;6DAjBXC,mBAAA,CAIM,OAJNG,UAIM,GAHFH,mBAAA,CAEM,OAFNI,UAEM,GADJJ,mBAAA,CAAsB,YAAAK,gBAAA,CAAfC,MAAA,CAAAC,OAAO,iB,KAIpBC,UAIM,EAGNC,UAAI,EACJC,UAAI,EAGiCC,IAAA,CAAAC,iBAAiB,I,cAAtDC,mBAAA,CAOI,OAPJC,UAOI,GANJd,mBAAA,CAES;IAFDD,KAAK,EAAC,QAAQ;IAAEgB,WAAS,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,iBAAiB;IAAMC,UAAQ,EAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,iBAAiB;MACnFnB,mBAAA,CAA2C;IAArCqB,GAAG,EAAEC,KAAA,CAAAC,YAAY;IAAKC,GAAG,EAAC;kEAElCxB,mBAAA,CAES;IAFDD,KAAK,EAAC,QAAQ;IAAEgB,WAAS,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,iBAAiB;IAAMC,UAAQ,EAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,iBAAiB;MACnFnB,mBAAA,CAA2C;IAArCqB,GAAG,EAAEC,KAAA,CAAAC,YAAY;IAAKC,GAAG,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}