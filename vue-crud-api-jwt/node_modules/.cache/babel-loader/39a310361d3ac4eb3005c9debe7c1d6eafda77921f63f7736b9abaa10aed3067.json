{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted, ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  name: \"Home\",\n  setup() {\n    const message = ref('');\n    const router = useRouter();\n\n    /*\r\n    onMounted(async () => {\r\n      try {\r\n        const {data} = await axios.get('user');\r\n            message.value = `Hi ${data.name}`;\r\n      } catch (e) {\r\n        await router.push('/login');\r\n      }\r\n    });\r\n        */\n\n    onMounted(async () => {\n      const sessionCookie = document.cookie.replace(/(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1');\n      console.log(sessionCookie);\n      //headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n      //headers.append('Access-Control-Allow-Credentials', 'true');\n      try {\n        const response = await axios.get('http://localhost:8086/api/v1/user', {\n          headers: {\n            Authorization: `Bearer ${sessionCookie}`,\n            'Access-Control-Allow-Origin': '*'\n          }\n        });\n        const {\n          data\n        } = response;\n        console.log(data);\n        //message.value = `Hi ${data.name}`;\n      } catch (error) {\n        console.error(error);\n        await router.push('/');\n      }\n    });\n    const logout = async () => {\n      const sessionCookie = document.cookie.replace(/(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1');\n      console.log(sessionCookie);\n      //\n\n      axios.post('http://localhost:8086/api/v1/auth/quit').then(() => {\n        // Handle successful logout\n        // Clear any user-related data in your Vue.js application\n        // Redirect the user to the login page or any other desired route\n        console.log(\"success\");\n      }).catch(error => {\n        // Handle logout error\n        console.error(error);\n      });\n    };\n    return {\n      message,\n      logout\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","axios","useRouter","name","setup","message","router","sessionCookie","document","cookie","replace","console","log","response","get","headers","Authorization","data","error","push","logout","post","then","catch"],"sources":["D:\\Project\\VUEJSSPRING_CRUD_JWT\\vue-crud-api\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-5 text-center\">\r\n      <h3>{{ message }}</h3>\r\n  \r\n      <a href=\"javascript:void(0)\" class=\"btn btn-lg btn-primary\"\r\n         @click=\"logout\"\r\n      >Logout</a>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import {onMounted, ref} from \"vue\";\r\n  import axios from \"axios\";\r\n  import {useRouter} from \"vue-router\";\r\n  \r\n  export default {\r\n    name: \"Home\",\r\n    setup() {\r\n      const message = ref('');\r\n      const router = useRouter();\r\n  \r\n      /*\r\n      onMounted(async () => {\r\n        try {\r\n          const {data} = await axios.get('user');\r\n  \r\n          message.value = `Hi ${data.name}`;\r\n        } catch (e) {\r\n          await router.push('/login');\r\n        }\r\n      });\r\n  \r\n      */\r\n  \r\n      \r\n      onMounted(async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n        //headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\r\n        //headers.append('Access-Control-Allow-Credentials', 'true');\r\n        try {\r\n          const response = await axios.get('http://localhost:8086/api/v1/user', {\r\n            headers: {\r\n              Authorization: `Bearer ${sessionCookie}`,\r\n              'Access-Control-Allow-Origin': '*'\r\n            },\r\n          });\r\n  \r\n          const { data } = response;\r\n          console.log(data);\r\n          //message.value = `Hi ${data.name}`;\r\n        } catch (error) {\r\n          console.error(error);\r\n          await router.push('/');\r\n        }\r\n      });\r\n      \r\n  \r\n      \r\n  \r\n      const logout = async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n        //\r\n  \r\n        axios.post('http://localhost:8086/api/v1/auth/quit')\r\n          .then(() => {\r\n            // Handle successful logout\r\n            // Clear any user-related data in your Vue.js application\r\n            // Redirect the user to the login page or any other desired route\r\n            console.log(\"success\");\r\n          })\r\n          .catch(error => {\r\n            // Handle logout error\r\n            console.error(error);\r\n          });\r\n      }\r\n  \r\n      return {\r\n        message,\r\n        logout\r\n      }\r\n  \r\n  \r\n  \r\n    }\r\n  }\r\n  </script>"],"mappings":";AAWE,SAAQA,SAAS,EAAEC,GAAG,QAAO,KAAK;AAClC,OAAOC,KAAI,MAAO,OAAO;AACzB,SAAQC,SAAS,QAAO,YAAY;AAEpC,eAAe;EACbC,IAAI,EAAE,MAAM;EACZC,KAAKA,CAAA,EAAG;IACN,MAAMC,OAAM,GAAIL,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMM,MAAK,GAAIJ,SAAS,CAAC,CAAC;;IAE1B;;;;;;;;;;;IAcAH,SAAS,CAAC,YAAY;MACpB,MAAMQ,aAAY,GAAIC,QAAQ,CAACC,MAAM,CAACC,OAAO,CAC3C,qDAAqD,EACrD,IACF,CAAC;MACDC,OAAO,CAACC,GAAG,CAACL,aAAa,CAAC;MAC1B;MACA;MACA,IAAI;QACF,MAAMM,QAAO,GAAI,MAAMZ,KAAK,CAACa,GAAG,CAAC,mCAAmC,EAAE;UACpEC,OAAO,EAAE;YACPC,aAAa,EAAG,UAAST,aAAc,EAAC;YACxC,6BAA6B,EAAE;UACjC;QACF,CAAC,CAAC;QAEF,MAAM;UAAEU;QAAK,IAAIJ,QAAQ;QACzBF,OAAO,CAACC,GAAG,CAACK,IAAI,CAAC;QACjB;MACF,EAAE,OAAOC,KAAK,EAAE;QACdP,OAAO,CAACO,KAAK,CAACA,KAAK,CAAC;QACpB,MAAMZ,MAAM,CAACa,IAAI,CAAC,GAAG,CAAC;MACxB;IACF,CAAC,CAAC;IAKF,MAAMC,MAAK,GAAI,MAAAA,CAAA,KAAY;MACzB,MAAMb,aAAY,GAAIC,QAAQ,CAACC,MAAM,CAACC,OAAO,CAC3C,qDAAqD,EACrD,IACF,CAAC;MACDC,OAAO,CAACC,GAAG,CAACL,aAAa,CAAC;MAC1B;;MAEAN,KAAK,CAACoB,IAAI,CAAC,wCAAwC,EAChDC,IAAI,CAAC,MAAM;QACV;QACA;QACA;QACAX,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACxB,CAAC,EACAW,KAAK,CAACL,KAAI,IAAK;QACd;QACAP,OAAO,CAACO,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN;IAEA,OAAO;MACLb,OAAO;MACPe;IACF;EAIF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}