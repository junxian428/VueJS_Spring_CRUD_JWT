{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted, ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\nimport VueCookies from 'vue-cookies';\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      buttonImages: ['button1.png', 'button2.png'],\n      // Replace with the paths to your button images\n      hoverEffects: [false, false] // Track hover effects for each button\n    };\n  },\n\n  methods: {\n    toggleHoverEffect(index) {\n      this.hoverEffects[index - 1] = !this.hoverEffects[index - 1];\n    }\n  },\n  setup() {\n    const message = ref('');\n    const router = useRouter();\n\n    /*\r\n    onMounted(async () => {\r\n      try {\r\n        const {data} = await axios.get('user');\r\n            message.value = `Hi ${data.name}`;\r\n      } catch (e) {\r\n        await router.push('/login');\r\n      }\r\n    });\r\n        */\n\n    onMounted(async () => {\n      const sessionCookie = document.cookie.replace(/(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1');\n      console.log(sessionCookie);\n      const logoutBtn = document.getElementById('logoutBtn');\n\n      //\n      if (sessionCookie != \"\") {\n        console.log(\"logout button event attached\");\n        logoutBtn.addEventListener('click', logout);\n      } else {\n        logoutBtn.textContent = \"login\";\n        logoutBtn.addEventListener('click', login);\n        //message.value = `Please login your account`;\n      }\n\n      //headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n      //headers.append('Access-Control-Allow-Credentials', 'true');\n      try {\n        const response = await axios.get('http://localhost:8087/dashboard', {\n          headers: {\n            Authorization: `Bearer ${sessionCookie}`,\n            'Access-Control-Allow-Origin': '*'\n          }\n        });\n        const {\n          data\n        } = response;\n\n        //console.log(data);\n        //\n\n        // Access the object properties\n        const username = data.username;\n        const blob = data.blob;\n        console.log(\"Username:\", username);\n        //console.log(\"Blob:\",  atob(blob));\n        VueCookies.set('blob_data', blob, '7d'); // Save the access token in a cookie for 7 days\n\n        const blobCookie = document.cookie.replace(/(?:(?:^|.*;\\s*)blob_data\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1');\n        //console.log(blobCookie);\n        //\n        // URL decoding\n        //var decodedValue = decodeURIComponent(blobCookie);\n\n        // Base64 decoding\n        //var base64DecodedValue = atob(decodedValue);\n        //console.log(base64DecodedValue);\n        //\n        message.value = `Username : ${data.username}`;\n        if (data.username === undefined) {\n          message.value = \"Please login your account\";\n        }\n      } catch (error) {\n        console.error(error);\n        await router.push('/');\n      }\n    });\n    function convertToLogin() {\n      logoutBtn.textContent = 'Login';\n      logoutBtn.removeEventListener('click', logout);\n      logoutBtn.addEventListener('click', login);\n    }\n    function login() {\n      // Perform login actions here\n      console.log('Login clicked');\n      router.push('/login');\n    }\n    const logout = async () => {\n      const sessionCookie = document.cookie.replace(/(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1');\n      console.log(sessionCookie);\n\n      //\n\n      axios.post('http://localhost:8086/api/v1/auth/quit').then(() => {\n        // Handle successful logout\n        // Clear any user-related data in your Vue.js application\n        // Redirect the user to the login page or any other desired route\n        console.log(\"success\");\n        sessionStorage.removeItem('access_Token');\n        document.cookie = \"access_Token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n        localStorage.removeItem('access_Token');\n        message.value = `You are logout please login again`;\n        convertToLogin();\n      }).catch(error => {\n        // Handle logout error\n        console.error(error);\n        router.push('/login');\n      });\n    };\n    return {\n      message,\n      logout\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","axios","useRouter","VueCookies","name","data","buttonImages","hoverEffects","methods","toggleHoverEffect","index","setup","message","router","sessionCookie","document","cookie","replace","console","log","logoutBtn","getElementById","addEventListener","logout","textContent","login","response","get","headers","Authorization","username","blob","set","blobCookie","value","undefined","error","push","convertToLogin","removeEventListener","post","then","sessionStorage","removeItem","localStorage","catch"],"sources":["D:\\Project\\VUEJSSPRING_CRUD_JWT\\vue-crud-api-jwt\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-5 text-center\">\r\n      <a href=\"javascript:void(0)\" class=\"btn btn-lg btn-primary\" id=\"logoutBtn\">Logout</a>\r\n      <br>\r\n      <br>\r\n      <br>\r\n      <br>\r\n      <h5>{{ message }}</h5>\r\n    \r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import {onMounted, ref} from \"vue\";\r\n  import axios from \"axios\";\r\n  import {useRouter} from \"vue-router\";\r\n  import VueCookies from 'vue-cookies';\r\n\r\n  export default {\r\n    name: \"Home\",\r\n    data() {\r\n    return {\r\n      buttonImages: ['button1.png', 'button2.png'],  // Replace with the paths to your button images\r\n      hoverEffects: [false, false]  // Track hover effects for each button\r\n    };\r\n  },\r\n  methods: {\r\n    toggleHoverEffect(index) {\r\n      this.hoverEffects[index - 1] = !this.hoverEffects[index - 1];\r\n    }\r\n  },\r\n\r\n  \r\n    setup() {\r\n      const message = ref('');\r\n      const router = useRouter();\r\n  \r\n      /*\r\n      onMounted(async () => {\r\n        try {\r\n          const {data} = await axios.get('user');\r\n  \r\n          message.value = `Hi ${data.name}`;\r\n        } catch (e) {\r\n          await router.push('/login');\r\n        }\r\n      });\r\n  \r\n      */\r\n  \r\n      \r\n      onMounted(async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n        const logoutBtn = document.getElementById('logoutBtn');\r\n  \r\n  \r\n        //\r\n        if(sessionCookie != \"\"){\r\n          console.log(\"logout button event attached\");\r\n          logoutBtn.addEventListener('click', logout);\r\n        } else{\r\n          logoutBtn.textContent = \"login\";\r\n          logoutBtn.addEventListener('click', login);\r\n          //message.value = `Please login your account`;\r\n\r\n        }\r\n        \r\n        //headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\r\n        //headers.append('Access-Control-Allow-Credentials', 'true');\r\n        try {\r\n          const response = await axios.get('http://localhost:8087/dashboard', {\r\n            headers: {\r\n              Authorization: `Bearer ${sessionCookie}`,\r\n              'Access-Control-Allow-Origin': '*'\r\n            },\r\n          });\r\n  \r\n          const { data } = response;\r\n\r\n\r\n          //console.log(data);\r\n          //\r\n\r\n      \r\n          // Access the object properties\r\n          const username = data.username;\r\n          const blob = data.blob;\r\n\r\n          console.log(\"Username:\", username);\r\n          //console.log(\"Blob:\",  atob(blob));\r\n          VueCookies.set('blob_data',  blob, '7d'); // Save the access token in a cookie for 7 days\r\n\r\n          const blobCookie = document.cookie.replace(\r\n            /(?:(?:^|.*;\\s*)blob_data\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n            '$1'\r\n          );\r\n        //console.log(blobCookie);\r\n        //\r\n        // URL decoding\r\n        //var decodedValue = decodeURIComponent(blobCookie);\r\n\r\n        // Base64 decoding\r\n        //var base64DecodedValue = atob(decodedValue);\r\n        //console.log(base64DecodedValue);\r\n          //\r\n          message.value = `Username : ${data.username}`;\r\n          if(data.username === undefined){\r\n            message.value = \"Please login your account\";\r\n\r\n          }\r\n        } catch (error) {\r\n          console.error(error);\r\n          await router.push('/');\r\n        }\r\n      });\r\n      \r\n  \r\n          function convertToLogin() {\r\n        logoutBtn.textContent = 'Login';\r\n        logoutBtn.removeEventListener('click', logout);\r\n        logoutBtn.addEventListener('click', login);\r\n      }\r\n            function login() {\r\n          // Perform login actions here\r\n          console.log('Login clicked');\r\n          router.push('/login');\r\n        }\r\n  \r\n  \r\n  \r\n      const logout = async () => {\r\n        const sessionCookie = document.cookie.replace(\r\n          /(?:(?:^|.*;\\s*)access_Token\\s*\\=\\s*([^;]*).*$)|^.*$/,\r\n          '$1'\r\n        );\r\n        console.log(sessionCookie);\r\n  \r\n        //\r\n  \r\n        axios.post('http://localhost:8086/api/v1/auth/quit')\r\n          .then(() => {\r\n            // Handle successful logout\r\n            // Clear any user-related data in your Vue.js application\r\n            // Redirect the user to the login page or any other desired route\r\n            console.log(\"success\");\r\n            sessionStorage.removeItem('access_Token');\r\n            document.cookie = \"access_Token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\r\n            localStorage.removeItem('access_Token');\r\n\r\n            message.value = `You are logout please login again`;\r\n            convertToLogin();\r\n  \r\n          })\r\n          .catch(error => {\r\n            // Handle logout error\r\n            console.error(error);\r\n            router.push('/login');\r\n          });\r\n      }\r\n  \r\n      return {\r\n        message,\r\n        logout\r\n      }\r\n  \r\n  \r\n  \r\n    }\r\n  }\r\n  </script>\r\n\r\n\r\n<style>\r\n.button-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.button {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 200px;\r\n  height: 100px;\r\n  border: none;\r\n  background-color: transparent;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.button img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.button:hover {\r\n  transform: scale(1.1);\r\n}\r\n\r\n/* Add additional styling and hover effects as desired */\r\n</style>\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}